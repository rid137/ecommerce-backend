paths:
  /users:
    get:
      tags: [Users(Admin)]
      summary: Get all users (Admin Only)
      security:
        - cookieAuth: []
      responses:
        200:
          description: List of all users
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiResponse"
                  - type: object
                    properties:
                      data:
                        {
                          type: array,
                          items: { $ref: "#/components/schemas/User" },
                        }
        401:
          $ref: "#/components/schemas/responses/Unauthorized"
        403:
          $ref: "#/components/schemas/responses/Forbidden"

  /users/admins:
    get:
      tags: [Users(Admin)]
      summary: Get all admin users (Admin Only)
      security:
        - cookieAuth: []
      responses:
        200:
          description: List of admin users
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiResponse"
                  - type: object
                    properties:
                      data:
                        {
                          type: array,
                          items: { $ref: "#/components/schemas/User" },
                        }
        404:
          description: No admin users found (ERR_NF)
          $ref: "#/components/schemas/responses/NotFound"

  /users/profile:
    get:
      tags: [Profile]
      summary: Get current user profile
      security:
        - cookieAuth: []
      responses:
        200:
          description: Current user data
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiResponse"
                  - type: object
                    properties:
                      data: { $ref: "#/components/schemas/User" }
        404:
          $ref: "#/components/schemas/responses/NotFound"

    put:
      tags: [Profile]
      summary: Update current user profile
      security:
        - cookieAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username: { type: string }
                email: { type: string }
                password: { type: string, minLength: 6 }
      responses:
        200:
          description: Profile updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiResponse"
                  - type: object
                    properties:
                      data: { $ref: "#/components/schemas/User" }

  /users/{id}:
    get:
      tags: [Users(Admin)]
      summary: Get user by ID (Admin Only)
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: User details retrieved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiResponse"
                  - type: object
                    properties:
                      data: { $ref: "#/components/schemas/User" }
        404:
          $ref: "#/components/schemas/responses/NotFound"

    put:
      tags: [Users(Admin)]
      summary: Update user by ID (Admin Only)
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                username: { type: string }
                email: { type: string }
                isAdmin: { type: boolean }
      responses:
        200:
          description: User updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/ApiResponse"
                  - type: object
                    properties:
                      data: { $ref: "#/components/schemas/User" }

    delete:
      tags: [Users(Admin)]
      summary: Delete user by ID (Admin Only)
      security:
        - cookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: User removed
        400:
          description: Cannot delete admin user (ERR_VALID)
          $ref: "#/components/schemas/responses/BadRequest"
        404:
          $ref: "#/components/schemas/responses/NotFound"
